{% extends 'base.html' %}

{% block content %}
  <div class="container">
    <div class="row">
      <div class="col">
        <h2>{{ locale.text('Register') }}</h2>
        <p>{{ locale.text('Fill out the following form to complete your registration.') }}</p>
      </div>
    </div>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="row">
          {% for category, message in messages %}
            <div class="col alert alert-{{category}}" role="alert">{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    <div class="row">
      <div class="col">
        <form id="registrationForm" class="needs-validation" method="post" novalidate>
          <div class="form-group">
            <label for="emailInput">{{ locale.text('Email address') }}</label>
            <input class="form-control" id="emailInput" type="text" name="email" readonly placeholder="{{user_account_registration.email}}" value="{{ user_account_registration.email }}">
          </div>
          <div class="form-group">
            <label for="usernameInput">{{ locale.text('Username') }}</label>
            <input id="usernameInput" class="form-control" type="username" name="username" aria-describedby="usernameHelpBlock" placeholder="{{locale.text('Username')}}" required pattern="[A-Za-z0-9._-]{5,32}">
            <small id="usernameHelpBlock" class="form-text text-muted">
              {{ locale.text('Must be 5 to 32 characters long, contain only letters, numbers, dashes (-), periods (.), and underscores (_).') }}
            </small>
            <div class="valid-feedback">
              {{ locale.text("Nice username!") }}
            </div>
          </div>
          <div class="form-group">
            <label for="passwordInput">{{ locale.text('Password') }}</label>
            <input id="passwordInput" class="form-control" type="password" name="password" aria-describedby="passwordHelpBlock" placeholder="{{locale.text('Password')}}" required pattern=".{8,128}">
            <small id="passwordHelpBlock" class="form-text text-muted">
              {{ locale.text('Must be 8 to 128 character long.') }}
            </small>
            <div class="valid-feedback">
              {{ locale.text("Seems long enough!") }}
            </div>
            <div class="invalid-feedback">
              {{ locale.text("Needs more love.") }}
            </div>
          </div>
          <div class="form-group">
            <label for="confirmPasswordInput">{{ locale.text('Confirm password') }}</label>
            <input id="confirmPasswordInput" class="form-control" type="password" name="confirmPassword" placeholder="{{locale.text('Confirm password')}}">
            <div class="valid-feedback">
              {{ locale.text("Both passwords matches!") }}
            </div>
            <div class="invalid-feedback">
              {{ locale.text("Doesn't match your password above.") }}
            </div>
          </div>
          <div class="form-group">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="tocCheckbox" required>
              <label class="form-check-label" for="tocCheckbox">
                {{ locale.text('Agree to terms and conditions') }}
              </label>
              <div class="invalid-feedback">
                {{ locale.text('You must agree before submitting.') }}
              </div>
            </div>
          </div>
          <input type="hidden" name="token" value="{{user_account_registration.token}}">
          <button class="btn btn-primary" type="submit">{{ locale.text('Register') }}</button>
        </form>
      </div>
    </div>
  </div>

{% endblock %}

{% block scripts %}
  <script src="{{ url_for('static', filename='password-validation-setup.js') }}"></script>
{% endblock %}
